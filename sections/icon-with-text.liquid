{% schema %}
{
  "name": "Icon with Text",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Icon with Text"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        {
          "value": "grid",
          "label": "Grid"
        },
        {
          "value": "slider",
          "label": "Slider"
        }
      ],
      "default": "grid"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Number of columns on desktop",
      "min": 1,
      "max": 5,
      "default": 4
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#B91C1C"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#6B7280"
    },
    {
      "type": "select",
      "id": "columns_mobile",
      "label": "Number of columns on mobile",
      "options": [
        {
          "value": "1",
          "label": "1"
        },
        {
          "value": "2",
          "label": "2"
        }
      ],
      "default": "1"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "icon_text",
      "name": "Icon with Text",
      "limit": 8,
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            {
              "value": "truck",
              "label": "Truck (Shipping)"
            },
            {
              "value": "money",
              "label": "Money (Refund)"
            },
            {
              "value": "lock",
              "label": "Lock (Security)"
            },
            {
              "value": "support",
              "label": "Support (24/7)"
            },
            {
              "value": "star",
              "label": "Star"
            },
            {
              "value": "heart",
              "label": "Heart"
            }
          ],
          "default": "truck"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Feature heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Add descriptive text about your feature here.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon with Text",
      "blocks": [
        {
          "type": "icon_text",
          "settings": {
            "icon": "truck",
            "heading": "Free Shipping",
            "text": "<p>Order above $200</p>"
          }
        },
        {
          "type": "icon_text",
          "settings": {
            "icon": "money",
            "heading": "Money-back",
            "text": "<p>30 days guarantee</p>"
          }
        },
        {
          "type": "icon_text",
          "settings": {
            "icon": "lock",
            "heading": "Secure Payments",
            "text": "<p>Secured by Stripe</p>"
          }
        },
        {
          "type": "icon_text",
          "settings": {
            "icon": "support",
            "heading": "24/7 Support",
            "text": "<p>Phone and Email support</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}

<div
  class="icon-with-text section-{{ section.id }}-padding"
  style="background-color: {{ section.settings.background_color }}; "
>
  <div class="page-width">
    {% if section.settings.title != blank %}
      <h2 class="icon-with-text__heading h1">{{ section.settings.title }}</h2>
    {% endif %}

    <div
      class="icon-with-text_wrapper {% if section.settings.layout == 'slider' %}icon-with-text__slider{% else %}icon-with-text__grid{% endif %}"
      {% if section.settings.layout == 'grid' %}
        style="--desktop-columns: {{ section.settings.columns_desktop }}; --mobile-columns: {{ section.settings.columns_mobile }};"
      {% endif %}
    >
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'icon_text' %}
            <div class="icon-with-text__item" {{ block.shopify_attributes }}>
              <div class="icon-with-text__icon" style="color: {{ section.settings.icon_color }}">
                {% case block.settings.icon %}
                  {% when 'truck' %}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="40"
                      height="40"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <rect x="1" y="3" width="15" height="13"></rect>
                      <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                      <circle cx="5.5" cy="18.5" r="2.5"></circle>
                      <circle cx="18.5" cy="18.5" r="2.5"></circle>
                    </svg>
                  {% when 'money' %}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="40"
                      height="40"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <circle cx="12" cy="12" r="10"></circle>
                      <line x1="12" y1="8" x2="12" y2="16"></line>
                      <line x1="8" y1="12" x2="16" y2="12"></line>
                    </svg>
                  {% when 'lock' %}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="40"
                      height="40"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                      <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                  {% when 'support' %}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="40"
                      height="40"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                  {% when 'star' %}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="40"
                      height="40"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                  {% when 'heart' %}
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="40"
                      height="40"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                {% endcase %}
              </div>
              <div class="icon-with-text__content">
                <h3 class="icon-with-text__title h4" style="color: {{ section.settings.heading_color }}">
                  {{ block.settings.heading }}
                </h3>
                <div class="icon-with-text__text rte" style="color: {{ section.settings.text_color }}">
                  {{ block.settings.text }}
                </div>
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .icon-with-text {
    width: 100%;
  }

  .section-{{ section.id }}-padding{
    padding-top: {{ section.settings.padding_top }}px; 
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }
  @media (max-width: 1010px){
    .section-{{ section.id }}-padding{
      padding-top: calc({{ section.settings.padding_top }}px / 2);
      padding-bottom: calc({{ section.settings.padding_bottom }}px / 2);
    }
  }

  .icon-with-text__heading {
    text-align: center;
    margin-bottom: 2rem;
  }

  .icon-with-text__grid {
    display: grid;
    grid-template-columns: repeat(var(--desktop-columns), 1fr);
    gap: 2rem;
  }

  .icon-with-text__item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;  
    padding: 1.5rem;
  }

  .icon-with-text__icon {
    margin-bottom: 1rem;
  }

  .icon-with-text__title {
    margin-top: 0;
    margin-bottom: 0.5rem;
  }

  .icon-with-text__text {
    margin: 0;
  }

  @media screen and (max-width: 749px) {
    .icon-with-text__grid {
      grid-template-columns: repeat(var(--mobile-columns), 1fr);
    }
  }

  /* Slider styles */
  .icon-with-text__slider {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    gap: 2rem;
    padding-bottom: 1rem;
    -webkit-overflow-scrolling: touch;
  }

  .icon-with-text_slider .icon-with-text_item {
    flex: 0 0 auto;
    width: 85%;
    scroll-snap-align: start;
  }

  @media screen and (min-width: 750px) {
    .icon-with-text_slider .icon-with-text_item {
      width: 23%;
    }
  }
</style>  
